# پراکسی‌سرور لبه

## پراکسی‌ سرور لبه چیست؟

پراکسی‌سرور لبه(به‌انگلیسی Edge Proxy Server؛ به اختصار EPS) نوعی پراکسی‌سرور و مدیر ترافیک است که در لبه‌ی شبکه قراردارد و درخواست‌های کاربر (به‌انگلیسی client) را دریافت کرده سپس در تعامل با سرورهای بالادست پاسخ متناسب را فرآهم می‌کند. از آنجایی که EPS در لبه‌ قرار گرفته، امنیت سامانه را  تا حد قابل قبولی تأمین کرده و امروزه به یکی از فناوری‌های اصلی کسب‌و‌کار‌های آنلاین تبدیل شده است. 
EPS با استفاده از فناوری‌هایی مثل فایروال برنامه های وب (WAF)، آفلودکننده SSL، سرور cache، لایه محافظ در برابر حملات DOS و DDOS، لایه متعادل‌کننده بار ترافیکی (load balancer)  و دیگر ابزارهای پیشرو، زیرساخت شما را از منظر DevOps، امنیت و عملیات توانمند می‌سازد. 

این خدمت شامل مجموعه‌ای از ابزارهای متن‌باز و نرم‌افزارهایی است که توسط گروه نرم‌افزاری آسام توسعه داده شده است. 

### فایروال برنامه‌های وب (WAF)

فایروال برنامه‌های وب (به‌انگلیسی Web Application Firewall؛ به اختصار WAF) یک فایروال لایه ۷ است که قابلیت پایش، فیلتر کردن، و مسدودساختن حملات سایبری و ترافیک مضر را داراست. عمده حملات و آسیب‌پذیری‌هایی که این فایروال می‌تواند تشخیص دهد و سامانه را از آن‌ها محافظت کند عبارتند از:

  * تزریق SQL 
  * تزریق اسکریپت از طریق سایت (‌XSS)  
  * گنجاندن فایل 
  * اجرای کد از راه دور

در این ابزار حالت یادگیری (به‌انگلیسی Learning Mode) در نظر گرفته شده، که برای غنی‌ساختن پایگاه قوانین فایروال بسیار کمک کننده است. در حالت یادگیری با تحلیل لاگ‌ها قبل از پیاده‌سازی EPS این قابلیت فرآهم می‌شود تا مثبت‌های کاذب فایروال به طور چشم‌گیری کاهش یابد. 

### پراکسی معکوس

پراکسی معکوس (به‌انگلیسی Reverse proxy) نوعی پراکسی سرور است که منابع (به‌انگلیسی resources) متناسب با درخواست‌های یک کاربر را بیرون شبکه زیرساخت شما تأمین می‌کند. در حقیقت این لایه درخواست کاربر را دریافت و به یک یا چند سرور بالادست در داخل شبکه هدایت می‌کند و پاسخ متناسب را بدون دسترسی مستقیم کاربر به سرورهای backend فرآهم می‌کند. این ابزار به شما کمک می‌کند سرویس موردنظر از طریق یک خوشه (cluster) امن به کاربر ارائه شود. هچنین، این فناوری قابلیت لاگ مرکزی و عیب‌یابی متمرکز را فرآهم می‌کند.

### لایه آفلودکننده SSL

این لایه می‌تواند عملیات اتمام (به‌انگلیسی termination) TLS را برای تمامی سرورهای بالادست به صورت مرکزی و امن فرآهم کند. یکی از مهم‌ترین مزایای این روش برطرف ساختن نیاز به‌ اشتراک‌گذاشتن کلیدهای خصوصی با سرور‌های backend است. همچنین این لایه با حذف بار پردازشی رمزگذاری/رمزنگاری (به‌انگلیسی encryption/decryption) از سرور‌های backend منجر به ارتقای عملکرد سامانه می‌شود. 


### مدیر خط‌مشی دسترسی

مدیر خط مشی (به‌انگلیسی Access Policy Manager) احراز هویت را در سطح شبکه تحویل محتوا (به‌انگلیسی Content Delivery Network؛ به اختصار CDN) فرآهم می‌کند. به بیان دیگر، این فناوری دسترسی به سامانه‌های حیاتی را از طریق CDN تسهیل می‌کند. 


### شتاب‌دهنده سرعت‌صفحه

این لایه امکان‌های متعددی برای بهینه‌سازی صفحات HTML  سامانه‌های مختلف فرآهم می‌شود که باعث افزایش سرعت بارگزاری (به‌انگلیسی loading) تمامی سامانه‌های متصل به CDN می‌شود. برخی از امکانات این لایه عبارتند از:

  * **بهینه‌سازی تصاویر** (image optimization) از طریق تغییراندازه پویا (dynamic resizing)، حذف  متادیتا و فشرده‌سازی مجدد (recompression)
  * **بهینه‌سازی و فشرده‌سازی اسکریپت‌ها** با فشرده‌کردن کدهای CSS و جاوااسکریپت، به‌هم‌چسباندن (concatenation)، inlining و outlining 
* **مرتب‌سازی کدهای HTML** با مرتب‌کردن اسکریپت‌های HTML، کوچک‌کردن اندازه payload و بهینه‌سازی رندر شدن در مرورگر (browser rendering)
  * **بهینه سازی ترتیب اجرای اسکریپت‌ها و عکس‌های صفحات** با استفاده از روش‌های ‌deferring image and Javascript loading .
* **زمان‌بندی Cache** با افزایش طول‌عمر (lifetime) برای Cache محتواهایی که ثابت هستند، قابلیت افزایش سرعت بارگیری صفحه بدون تداخل با امکان تغییر محتوای سایت فرآهم می‌شود.

### فشرده‌ساز

در این لایه از EPS، به‌منظور کاهش پهنای باند (به‌انگلیسی bandwidth)، کاهش تأخیر (به‌انگلیسی latency) و بهینه‌سازی جریان داده در مرورگرها، از الگوریتم‌های Brotli و یا  Gzip استفاده می‌شود که امکان کاهش پهنای باند را تا نصف پهنای باند مصرفی عادی فرآهم می‌کند.  

### لایه محافظ در برابر حملات DOS و DDOS

این لایه با ارسال  آزمون‌های پاسخ‌چالش ( به‌انگلیسی challenge–response tests) مثل کپچا (به‌انگلیسی CAPTCHA) برای کاربرانی که درخواست‌های زیاد یا غیرمعمول فرستاده‌اند زیرساخت شما را در برابر حملات DOS و DDOS  محافظت می‌کند. این محافظ به طور هوشمند IP های با فعالیت مشکوک را تشخیص می‌دهد و برای سامانه یک سپر امن در برابر ترافیک مضر ایجاد می‌کند. همچنین این امکان وجود دارد که برای سامانه‌های حساس دسترسی به برنامه پشت CDN بدون وارد کردن کپچا مقدور نباشد.   

### محدودکننده نرخ درخواست  

این لایه (به‌انگلیسی Rate limit)  امکان محدود کردن کاربران به تعداد مشخصی درخواست در واحد زمان را فرآهم می‌کند به طوری‌که اگر کاربری بیش‌ از تعداد مشخص شده درخواست ارسال کند با تأخیر در مواجه می‌شود یا درخواستش مسدود می‌شود. 

###  متعادل‌کننده بار ترافیکی

 متعادل‌کننده بار ترافیکی (به‌انگلیسی load balancer) شما را توانمند می‌کند تا بار ترافیک را بین سرورهای متعدد سامانه توزیع و متعادل کنید. در این برنامه از رویکردهای فعال/منفعل (به‌انگلیسی Active/Passive)، درخواست به‌نوبت (به‌انگلیسی Round-Robin )، یا روش هوشمند کشف سرویس (به‌انگلیسی Service Discovery ) استفاده می‌شود. 

### دسترسی با IP منحصر

ویژگی دسترسی با ‌IP منحصر (به‌انگلیسی IP Restrict Access) سامانه‌های حیاتی شما را توانمند می‌کند تا دسترسی به آن از CDN خارج از کشور مقدور نباشد یا براساس لیست سیاه یا سفید تنظیم شود. 


### سرور cache

با استفاده از استانداردهای موجود در فضای وب و پروتکل‌های انتقال داده، سرور cache نه‌تنها امکان ‌ذخیره (به‌انگلیسی cache) محتوای ایستا (به‌انگلیسی static contents) را دارد بلکه می‌تواند به صورت هوشمند محتوای وب‌سرورها یا اپلیکیشن‌های مختلف را ذخیره کند. امکان cache کردن منابع (به‌انگلیسی resources) منحصر به درخواست‌های مشخص منجر به بهبود معنی‌دار عملکرد سامانه می‌شود به طوری که برای درخواست‌های همانند بعدی، سرورهای backend وادار به پاسخگویی نیستند و سرور cache منابع را فرآهم می‌کند. این ویژگی منجر به ارتقای چشم‌گیر سرعت وب‌سرورها یا اپلیکیشن‌هایی می‌شود که کاربران میهمان زیادی دارند. 

### گزارش‌گیری خطاهای سمت کاربر

ابزار گزارش‌گیری خطاهای سمت کاربر (به‌انگلیسی Client-Side Error Reporting) خطاهایی که در سمت کاربر نهایی ایجاد شده‌اند (مثل خطاهای جاوا اسکریپت یا syntax) را پایش کرده و باتوجه تعداد تکرار خطاها و وابسته به نوع مرورگر و سیستم‌عامل آن‌ها را دسته‌بندی می‌کند. مبتنی بر این گزارش‌ها، توسعه‌دهندگان سرورهای backend می‌توانند تجربه رابط کاربری (به‌انگلیسی application interface) را  پایش کرده و سامانه را ارتقا دهند. همچنین این لایه می‌تواند گواهینامه (به‌انگلیسی certificate) وب‌سرورها را پایش کرده و بازخورد مرورگرها و سیستم‌های عامل را گزارش کند.     



 














